# Краткий гид по общим правилам именования при разаработки на Bitrix
v1.0

## Именование

### Метки комментов:

```#UPDATESTOP:``` - изменения внутри модулей которые будут затерты при апдейте
```#TODO:``` - сделать
```#TODO-0:``` - сделать обязательно

### Переменные

#### Префиксы переменных

Переменные хранящие обычные значения, такие как целые и строки начинаются с заглавной буквы и именуются в CamelCase. Например $Id, $Price и т.д.

Массивы имеют префиксы:  
- $lst* - список однородных элементов, порядок которых не важен, например список элементов ИБ
- $ul* - упорядоченный список однородных элементов, например навигационная цепочка разделов
- $dct* - массив, представляющий собой разнородные элементы, например поля и свойства элемента ИБ
- $ref* - справочник однородных элементов, например список элементов ИБ ключами которого являются их ID
- $ar* - массивы используемые в штатном движке компонентов Bitrix и со стандартными компонентами. Например $arFilter для компонента bitrix:catalog.element, но $dctFilter для функции API ядра.

Объекты именуются с маленькой буквы, в lowerCamelCase и могут иметь префексы:
- $rdb* - итерируемый результат выборки из бд, например $rdbPrice = \Bitrix\Catalog\Model\Price::getList($dctFilter);

Неиспользуемая переменная \$\_. 
Например для перебора ключей foreach (\$ref as \$Key=>\$\_).

#### Имена переменных

- *Element - элемент инфоблока, например $lstElements или $dctElement
- *Product - товар, элемент торгового каталога, имеющий цену, когда не важно идет ли речь об обычном товаре или торговом предложении
- *Offer - торговое предложение
- *Good - товар имеющий торговые предложения

### Коды сущностей и полей

Предполагается, что символьные коды информационных блоков, свойств элементов ИБ и т.п. именуются исключительно латинскими буквами и цифрами. Символ подчеркивания используется только как технический разделитель, но не для целей читаемости. Например FULLNAME (но не FULL_NAME) для полного название элемента. Однако FULLNAME_RU и FULLNAME_UA, для версий полного названия на русском и украинском языках, соответственно.

Можно использовать префиксы имен для распределения свойств по группам. Например CHARS_* для характеристик объекта (CHRS_SPEED и CHRS_COLOR), LGST_* для логистически параметров (LGST_NUMINPACK и LGST_PACKTYPE).

Можно сочетать префикс и постфикс: CHRS_COLOR_RU для цвета на русском языке и CHRS_COLOR_UA для названия цвета на украинском (это только пример в реальном кейсе для цветом лучше использовать справочник).

Эти же правила применимы для полей таблиц.

### Именование шаблонов компонентов

Имена шаблонов компонентов состоят из букв, цифр, подчеркивания, тире (минус) и точки. Тире отделяет цепочки именования и указывает на включаемые файлы так что каждый компонент подключает в своих файлах, файлы компонента чье имя располагается до последнего тире. Например шаблон с именем *menu-header-mobile* использует файлы из шаблона *menu-header*, а *menu-header* из шаблона *menu* или *menu-*. Если имя шаблона заканчивается на тире, например *menu-* - это означает, что данный шаблон не используется сам, а является только донором файлов для других шаблонов.  
Типичное использование result_modifier.php из шаблона донора:
```php
include(__DIR__.'/../menu-/result_modifier.php');
```

#### Именование файлов в шаблоне

Файлы подключаемые в другие файлы шаблона именуются с добавлением *-имя* к имени файла в который они подключаются. Например файл с событиями трекинга подключаемый в template.php может именоваться template-tracking.php

## Настройки инфоблоков

Для всех инфоблоков должны быть заданы уникальные символьные коды, отражающие хранимую в них информацию или роль ИБ. Если инфоблок имеет заданный код API - он должен совпадать с символьными кодом.

## Найстройки хайлойд блоков

Название сущности хайлойдблока должно начинаться с большой буквы и отражать хранимую в нём информацию. Название таблицы должно соответствовать маске b_hlbd_{НазваниеСущностиВLowercase}, например: Stringstorage и b_hlbd_stringstorage

## Разметка элементов html

Для указания id сущностей в dataset html элементов используется следующий шаблон: bx-{модуль}-{сущность}-id. Например для id раздела инфоблока имя атрибута html будет таким: *data-bx-iblock-section-id*, а для id элемента:  *data-bx-iblock-element-id*, для указания id сделки: *data-bx-crm-deal-id*. Более общий шаблон выглядит так: bx-{модуль}-{сущность}-{имяПоля}, т.е. если необходимо указать код, можно использовать атрибут *data-bx-iblock-element-code*.  
Если необходимо указывать значения из собственных таблиц не являющихся частью модуля, то в качестве имени модуля, можно использовать *app*, с собственными именами сущностей или *orm* с именами таблиц. Однако обратите внимание, что использование шаблона bx-orm-{имяТаблицы}-{имяПоля} раскрывает информацию об именах таблиц проекта. В целом это не должно являться угрозой безопасности, но может быть нежелательно.

## Объекты js

Все объекты пространства X располагаются в BX.X  
Собственные объекты проета должны располагаться в BX.App. Скрипты относящиеся к классическим компонентам. Например так:  
BX.App.Core - js ядро проекта  
BX.App.Core.PageController - контроллер страницы  
BX.App.Controllers - другие контроллеры
BX.App.Vue - все что связано с Vue  
BX.App.Vue.Components - стандартное хранилище которе использует Loader из xExtension  
BX.App.Vue.store - стандатрное хранилище состояний  
BX.App.Components - скрипты компонентов  
типичный код определения:
```js
BX.ready(() => {
    'use strict';
    BX.App = BX.App || {};
    BX.App.Components = BX.App.Components || {};

    BX.App.Components.CatalogSection = BX.App.Components.CatalogSection || {};
    BX.App.Components.CatalogSection.catalog_block = BX.App.Components.CatalogSection.catalog_block || {
        /// объект
        init () {
            console.log('BX.App.Components.CatalogSection.catalog_block');
        }
    };

    BX.App.Components.CatalogSection.catalog_block.init();
});
```


