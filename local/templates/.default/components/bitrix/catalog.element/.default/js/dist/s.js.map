{"version":3,"file":"s.js","sources":["../src/element.js"],"sourcesContent":["import 'app.vue.components.basket.mixin'; let BasketAdd = BX.App.Vue.Mixins.BasketAdd;\n\nexport const CatalogElement = {\n    mixins: [BasketAdd],\n    inject: ['propses','offers'],\n    data () {\n\t\treturn {\n            SelectSizeId: false,\n            // OffersCnt: {},\n        }\n    },\n    computed: {\n        sizes () {\n            let sizes = [];\n            if (this.propses.SIZE?.VALUES) {\n                for (let i in this.propses.SIZE.VALUES) {\n                    if (!this.propses.SIZE.VALUES[i].NA) sizes.push(this.propses.SIZE.VALUES[i]);\n                }\n            }\n            return sizes;\n        },\n        selectSize () {\n            if (this.SelectSizeId)\n            {\n                for (let id in this.sizes) {\n                    if (this.sizes[id].ID == this.SelectSizeId) return this.sizes[id];\n                }\n            }\n            return false;\n        },\n        selectOffer () {\n            if (this.SelectSizeId) {\n                for (let i in this.offers) {\n                    if (this.offers[i].PROPERTIES_VALUE_ENUM_ID.SIZE == this.SelectSizeId) {\n                        return this.offers[i];\n                    }\n                }\n            }\n            return false;\n        },\n        Price () {\n            // if (this.Sum) {\n            //     return BX.Currency.currencyFormat(this.Sum,'KZT',true);\n            // } else {\n            //     return this.GoodPrice;\n            // }\n        },\n    },\n    created () {\n        // this.$nextTick(()=>{\n\n        // });\n\n        if (!this.SelectSizeId && this.sizes.length) {\n            this.SelectSizeId = this.sizes[0].ID\n        }\n\n        // управление количеством\n        // for (let i in this.offers) {\n        //     this.OffersCnt[this.offers[i].ID] = 1;\n        // }\n    },\n    watch: {\n\t\tselectOffer (Offer)\n\t\t{\n            let offers = {};\n\t\t\tif (Offer) {\n                offers[Offer.ID] = 1;\n            }\n            \n            this.form.offers = offers;\n\t\t}\n\t},\n    methods: {\n        // changeCnt (Δ) \n        // {\n            \n        // },\n        setSize(Code) {\n            this.SelectSizeId = Code;\n        }\n    },\n\ttemplate: /*vue-html*/`\n    <div class=\"product-size\">\n        <div class=\"row align-items-end mb-2\">\n            <div class=\"col\" v-if=\"selectSize\">\n                <strong>Size: </strong> {{selectSize.NAME}}\n            </div>\n            <!--\n            <div class=\"col-auto\">\n                <a href=\"#\" class=\"sizing-guide\">Sizing guide</a>\n            </div>\n            -->\n        </div>\n        <div class=\"listing-size\">\n            <span\n                    v-for=\"val in sizes\"\n                    v-bind:value=\"val.ID\"\n                    v-on:click=\"setSize(val.ID)\"\n                    class=\"size-item\" \n                    v-bind:class=\"{'size-item--active': val.ID==SelectSizeId}\"\n                >{{val.NAME}}</span>\n        </div>\n    </div>\n\n    <!--.quantity-->\n    \n    <div class=\"product-price\" v-if=\"selectOffer\">\n        <div class=\"product-price__value\">{{selectOffer.PRINT_RATIO_PRICE}}</div>\n        <s \n                class=\"product-price__value-old\"\n                v-if=\"selectOffer.BASE_PRICE > selectOffer.PRICE\"\n            >{{selectOffer.PRINT_RATIO_BASE_PRICE}}</s>\n    </div>\n\n    <div class=\"row align-items-center \">\n        <div class=\"col mb-4\">\n            <div class=\"product-btns\">\n                <span href=\"#\" class=\"add-cart second-button\" v-on:click=\"add\">Add to cart</span>\n            </div>\n        </div>\n    </div>\n    `\n}\n\n/**\n * \n <div class=\"quantity\">\n    <div class=\"quantity-title\">\n        Quantity\n    </div>\n    <div class=\"quantity-item\">\n        <button class=\"quantity-btn minus\"></button>\n        <input type=\"text\" value=\"1\">\n        <button class=\"quantity-btn plus\"></button>\n    </div>\n</div>\n */"],"names":["BasketAdd","BX","App","Vue","Mixins","CatalogElement","mixins","inject","data","SelectSizeId","computed","sizes","_this$propses$SIZE","propses","SIZE","VALUES","i","NA","push","selectSize","id","ID","selectOffer","offers","PROPERTIES_VALUE_ENUM_ID","Price","created","length","watch","Offer","form","methods","setSize","Code","template"],"mappings":";;;;;;;IAA0C,IAAIA,SAAS,GAAGC,EAAE,CAACC,GAAG,CAACC,GAAG,CAACC,MAAM,CAACJ,SAAS;AAErF,QAAaK,cAAc,GAAG;MAC1BC,MAAM,EAAE,CAACN,SAAS,CAAC;MACnBO,MAAM,EAAE,CAAC,SAAS,EAAC,QAAQ,CAAC;MAC5BC,IAAI,WAAAA,OAAI;QACV,OAAO;UACGC,YAAY,EAAE;;SAEjB;OACJ;MACDC,QAAQ,EAAE;QACNC,KAAK,WAAAA,QAAI;UAAA,IAAAC,kBAAA;UACL,IAAID,KAAK,GAAG,EAAE;UACd,KAAAC,kBAAA,GAAI,IAAI,CAACC,OAAO,CAACC,IAAI,cAAAF,kBAAA,eAAjBA,kBAAA,CAAmBG,MAAM,EAAE;YAC3B,KAAK,IAAIC,CAAC,IAAI,IAAI,CAACH,OAAO,CAACC,IAAI,CAACC,MAAM,EAAE;cACpC,IAAI,CAAC,IAAI,CAACF,OAAO,CAACC,IAAI,CAACC,MAAM,CAACC,CAAC,CAAC,CAACC,EAAE,EAAEN,KAAK,CAACO,IAAI,CAAC,IAAI,CAACL,OAAO,CAACC,IAAI,CAACC,MAAM,CAACC,CAAC,CAAC,CAAC;;;UAGpF,OAAOL,KAAK;SACf;QACDQ,UAAU,WAAAA,aAAI;UACV,IAAI,IAAI,CAACV,YAAY,EACrB;YACI,KAAK,IAAIW,EAAE,IAAI,IAAI,CAACT,KAAK,EAAE;cACvB,IAAI,IAAI,CAACA,KAAK,CAACS,EAAE,CAAC,CAACC,EAAE,IAAI,IAAI,CAACZ,YAAY,EAAE,OAAO,IAAI,CAACE,KAAK,CAACS,EAAE,CAAC;;;UAGzE,OAAO,KAAK;SACf;QACDE,WAAW,WAAAA,cAAI;UACX,IAAI,IAAI,CAACb,YAAY,EAAE;YACnB,KAAK,IAAIO,CAAC,IAAI,IAAI,CAACO,MAAM,EAAE;cACvB,IAAI,IAAI,CAACA,MAAM,CAACP,CAAC,CAAC,CAACQ,wBAAwB,CAACV,IAAI,IAAI,IAAI,CAACL,YAAY,EAAE;gBACnE,OAAO,IAAI,CAACc,MAAM,CAACP,CAAC,CAAC;;;;UAIjC,OAAO,KAAK;SACf;QACDS,KAAK,WAAAA,QAAI;;;;;;;OAOZ;MACDC,OAAO,WAAAA,UAAI;;;;;QAKP,IAAI,CAAC,IAAI,CAACjB,YAAY,IAAI,IAAI,CAACE,KAAK,CAACgB,MAAM,EAAE;UACzC,IAAI,CAAClB,YAAY,GAAG,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAACU,EAAE;;;;;;;OAO3C;MACDO,KAAK,EAAE;QACTN,WAAW,WAAAA,YAAEO,KAAK,EAClB;UACU,IAAIN,MAAM,GAAG,EAAE;UACxB,IAAIM,KAAK,EAAE;YACEN,MAAM,CAACM,KAAK,CAACR,EAAE,CAAC,GAAG,CAAC;;UAGxB,IAAI,CAACS,IAAI,CAACP,MAAM,GAAGA,MAAM;;OAEnC;MACEQ,OAAO,EAAE;;;;QAKLC,OAAO,WAAAA,QAACC,IAAI,EAAE;UACV,IAAI,CAACxB,YAAY,GAAGwB,IAAI;;OAE/B;MACJC,QAAQ;IAyCT,CAAC;;IAED;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;;;;;;;"}